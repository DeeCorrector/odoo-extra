<?xml version="1.0"?>
<terp>
<data>
	<!--
	=======================================================
	Offer Views
	=======================================================
	-->
	<record model="ir.ui.view" id="view_offer_tree">
		<field name="name">dm.offer.tree</field>
		<field name="model">dm.offer</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Offers">
				<field name="name"/>
				<field name="copywriter_id"/>
				<field name="quotation"/>
				<field name="state"/>	
			</tree>
		</field>
	</record>

	<record model="ir.ui.view" id="view_offer_form">
		<field name="name">dm.offer.form</field>
		<field name="model">dm.offer</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Offers">
				<notebook>
					<page string="General">
						<field name="name" select="1"/>
						<field name="code"/>
						<field name="lang_orig"/>
						<field name="copywriter_id"/>
<!--						<field name="mark_id"/>-->
						<field name="offer_origin_id"/>
						<field name="active" select="2"/>
						<newline/>
						<field name="quotation"/>
						<field name="legal_state"/>
						<field name="notes" colspan="4"/>
						<field name="date_purchase"/>
						<field name="date_validation"/>
						<separator string="Categories" colspan="4"/>
						<field name="category_ids" colspan="4" nolabel="1"/>
						<separator string="Status" colspan="4"/>
						<group col="8" colspan="4">
							<field name="state" nolabel="1" select="1"/>
							<button name="state_close_set" string="Close" states="open,draft,freeze" type="object"/>
							<button name="state_open_set" string="Open" states="draft,freeze" type="object"/>
							<button name="state_freeze_set" string="Freeze" states="draft,open" type="object"/>
							<button name="state_draft_set" string="Reset to Draft" states="closed" type="object"/>
						</group>
					</page>
					<page string="Advises"><!--
						<separator string="Layout" colspan="4"/>
						<field name="note_layout" nolabel="1" colspan="4"/>

						<newline/>
						<separator string="Mark" colspan="4"/>
						<field name="note_mark" nolabel="1" colspan="4"/>
						<newline/>-->
						<separator string="Production" colspan="4"/>
						<field name="production_note" nolabel="1" colspan="4"/>
						<field name="production_category_ids" colspan="2" string="Category"/>
						<field name="production_delay"/>
						<field name="production_cost" colspan="4" string="Cost"/>
						<newline/>
						<separator string="Purchase" colspan="4"/>
						<field name="purchase_note" nolabel="1" colspan="4"/>
						<field name="purchase_category_ids" colspan="4"  string="Category"/>
					</page>
					<page string="History">
						<field name="history_ids" nolabel="1" colspan="4">
							<form string="Actions">
								<separator string="Action Information" colspan="4"/>-
								<field name="date" />
								<field name="user_id" />
								<field name="state" />
							</form>
						</field>
					</page>
				</notebook>	
			</form>
		</field>
	</record>	
	<record model="ir.actions.act_window" id="action_offer_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />		
	</record>
		
	<menuitem name="Direct Marketing/Offers/All Offers" id="menu_action_offer_form" action="action_offer_form"/>
	
	<!--
	======================
	Categories
	======================
	-->
	<record model="ir.ui.view" id="view_offer_category_form">
		<field name="name">dm.offer.category.form</field>
		<field name="model">dm.offer.category</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Offer Category">
				<field name="name" select="1"/>
				<field name="parent_id"/>
				<field name="domain" select="1"/>
			</form>
		</field>
	</record>
	
	<record model="ir.ui.view" id="view_offer_category_list">
		<field name="name">dm.offer.category.list</field>
		<field name="model">dm.offer.category</field>
		<field name="type">tree</field>
		<field name="priority" eval="6"/>
		<field name="arch" type="xml">
			<tree string="Offer Category">
				<field name="complete_name"/>
			</tree>
		</field>
	</record>
	
	
	<record model="ir.ui.view" id="view_offer_category_tree">
		<field name="name">dm.offer.category.tree</field>
		<field name="model">dm.offer.category</field>
		<field name="type">tree</field>
		<field name="field_parent">child_ids</field>
		<field name="arch" type="xml">
			<tree string="Offer Category">
				<field name="name"/>
			</tree>
		</field>
	</record>
	
	<record model="ir.actions.act_window" id="action_offer_categ_main">
		<field name="name">Offer Categories</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer.category</field>
		<field name="view_type">tree</field>
		<field name="view_id" ref="view_offer_category_tree"/>
		<field name="domain">[('parent_id','=',False)]</field>		
	</record>
	<!--
	<menuitem name="Direct Marketing/Configuration/Offer's Category" id="menu_action_offer_categ_main" action="action_offer_categ_main"/>
	-->

	<record model="ir.actions.act_window" id="action_offer_categ_form">
		<field name="name">Edit Categories</field>
		<field name="type">ir.actions.act_window</field>			
		<field name="res_model">dm.offer.category</field>
		<field name="view_type">form</field>
	</record>
	
	<menuitem name="Direct Marketing/Offers/Edit Category" id="menu_action_offer_categ_main_form" action="action_offer_categ_form"/>
	
	<record model="ir.actions.act_window" id="action_offer_by_category">
		<field name="name">Offer by Categories</field>	
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="domain">[('category_ids','child_of', [active_id])]</field>
	</record>
  	
	<record model="ir.values" id="ir_action_offer_by_category">
		<field name="key2" eval="'tree_but_open'"/>
		<field name="model" eval="'dm.offer.category'"/>
		<field name="name">Open Offer</field>
		<field name="value" eval="'ir.actions.act_window,%d'%action_offer_by_category"/>
		<field name="object" eval="True"/>
	</record>	
	
	<menuitem name="Direct Marketing/Offers/Offers By Category" id="menu_action_offer_by_category" action="action_offer_categ_main"/>

	<record model="ir.ui.view" id="view_offer_history_form">
		<field name="name">dm.offer.history.form</field>
		<field name="model">dm.offer.history</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Offers">
				<field name="offer_id"/>
				<field name="date"/>
				<field name="user_id"/>
				<field name="state"/>
			</form>
		</field>
	</record>
	<record model="ir.ui.view" id="view_offer_history_tree">
		<field name="name">dm.offer.history.tree</field>
		<field name="model">dm.offer.history</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Offers">
				<field name="date"/>
				<field name="user_id"/>
				<field name="state"/>
			</tree>
		</field>
	</record>
</data>
</terp>