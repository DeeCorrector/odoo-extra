<?xml version="1.0"?>
<terp>
<data>
	<menuitem name="Direct Marketing/Offers" id="menu_dm_offer" sequence="2"/>
	<!--
	=======================================================
	Offer Views
	=======================================================
	-->
	<record model="ir.ui.view" id="view_offer_tree">
		<field name="name">dm.offer.tree</field>
		<field name="model">dm.offer</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Offers">
				<field name="name"/>
				<field name="copywriter_id"/>
				<field name="quotation"/>
				<field name="state"/>	
			</tree>
		</field>
	</record>

	<record model="ir.ui.view" id="view_offer_form">
		<field name="name">dm.offer.form</field>
		<field name="model">dm.offer</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Offers">
				<notebook>
					<page string="General">
						<field name="name" select="1"/>
						<field name="code"/>
						<field name="lang_orig"/>
						<field name="copywriter_id"  select="2"  on_change = "change_code(type,copywriter_id)" />
						<field name="recommended_trademark"/>
						<field name="offer_origin_id"/>
						<field name="type" select="2" on_change = "change_code(type,copywriter_id)" />
						<field name="offer_responsible_id" select="2"/>
						<field name="active" select="2"/>
						<newline/>
						<field name="quotation"/>
						<field name="legal_state"/>
						<separator string="Categories" colspan="4"/>
						<field name="category_ids" colspan="4" nolabel="1"/>
						<separator string="Notes" colspan="4"/>
						<field name="notes" colspan="4"  nolabel="1"/>
						<separator string="Status" colspan="4"/>
						<group col="8" colspan="4">
							<field name="state" nolabel="1" select="1"/>
							<button name="state_open_set" string="Open" states="draft,freeze" type="object"/>
							<button name="state_freeze_set" string="Freeze" states="open" type="object"/>
							<button name="state_close_set" string="Close" states="open,draft,freeze" type="object"/>
							<button name="state_draft_set" string="Reset to Draft" states="closed" type="object"/>
						</group>
					</page>
					<page string="Description">
						<separator string="Description" colspan="4"/>
						<field name="desc" nolabel="1"/>
					</page>
					<page string="Advises">
						<separator string="DTP Advices" colspan="4"/>
						<field name="dtp_note" nolabel="1" colspan="4"/>
						<newline/>
						<separator string="Trademark Advices" colspan="4"/>
						<field name="trademark_note" nolabel="1" colspan="4"/>
						<newline/>-->
						<separator string="Production Advices" colspan="4"/>
						<field name="production_note" nolabel="1" colspan="4"/>
<!--						<field name="production_delay"/>-->
						<field name="production_cost" string="Cost"/>
						<separator string="Purchase Advices" colspan="4"/>
						<field name="purchase_note" nolabel="1" colspan="4"/>
					</page>
					<page string="History">
						<separator string="History" />
						<field name="history_ids" nolabel="1" colspan="4"/>
					</page>
					<page string="Dates">
						<field name="order_date"/>
						<field name="last_modification_date"/>
						<field name="plannned_delivery_date"/>
						<field name="delivery_date"/>	
						<newline />
						<field name="fixed_date"/>
<!--						<field name="buffer_delay"/>-->
					</page>
					<page string="Criteria">
						<separator string="Trademark Criteria" colspan="4"/>
						<field name="trademark_sex"/>
						<field name="trademark_age"/>
						<field name="trademark_country_ids" colspan="4"/>		
						<separator string="Geographical Criteria" colspan="4"/>
						<field name="forbidden_country_ids" colspan="4"/>		
						<field name="forbidden_state_ids" colspan="4" />	
					</page>
<!--					<page string="Statistics" >-->
<!--						still not define -->
<!--					</page>-->
				</notebook>	
			</form>
		</field>
	</record>	
	
	# ------------------------------------------------------
	# All Offers
	# ------------------------------------------------------

	<record model="ir.actions.act_window" id="action_offer_form">
		<field name="name">All Offers</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />		
	</record>
	<menuitem name="Direct Marketing/Offers/All Offers" id="menu_action_offer_form" action="action_offer_form"/>

	<record model="ir.actions.act_window" id="action_offer_form_all1">
		<field name="name">Open Offer</field>	
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','open')]</field>	
	</record>
	<menuitem name="Direct Marketing/Offers/All Offers/Open Offers" id="menu_action_offer_form_all1" action="action_offer_form_all1"/>

	<record model="ir.actions.act_window" id="action_offer_form_all2">
		<field name="name">Draft Offer</field>	
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','draft')]</field>		
	</record>
	<menuitem name="Direct Marketing/Offers/All Offers/Draft Offers" id="menu_action_offer_form_all2" action="action_offer_form_all2"/>

	<record model="ir.actions.act_window" id="action_offer_form_all3">
		<field name="name">Closed Offer</field>	
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','closed')]</field>		
	</record>
	<menuitem name="Direct Marketing/Offers/All Offers/Closed Offers" id="menu_action_offer_form_all3" action="action_offer_form_all3"/>


	# ------------------------------------------------------
	# My Offers
	# ------------------------------------------------------

	<record model="ir.actions.act_window" id="action_offer_form_my">
		<field name="name">My Offers</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('offer_responsible_id','=',uid)]</field>
	</record>
	<menuitem name="Direct Marketing/Offers/My Offers" id="menu_action_offer_form_my" action="action_offer_form_my"/>
 
	<record model="ir.actions.act_window" id="action_offer_form_my1">
		<field name="name">My Open Offer</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','open'),('offer_responsible_id','=',uid)]</field>	
	</record>
	<menuitem name="Direct Marketing/Offers/My Offers/Open Offers" id="menu_action_offer_form_my1" action="action_offer_form_my1"/>

	<record model="ir.actions.act_window" id="action_offer_form_my2">
		<field name="name">My Draft Offer</field>	
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','draft'),('offer_responsible_id','=',uid)]</field>		
	</record>
	<menuitem name="Direct Marketing/Offers/My Offers/Draft Offers" id="menu_action_offer_form_my2" action="action_offer_form_my2"/>

	<record model="ir.actions.act_window" id="action_offer_form_my3">
		<field name="name">My Closed Offer</field>	
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','closed'),('offer_responsible_id','=',uid)]</field>		
	</record>
	<menuitem name="Direct Marketing/Offers/My Offers/Closed Offers" id="menu_action_offer_form_my3" action="action_offer_form_my3"/>

	<!--
	=======================================================
	Offer Model Views
	=======================================================
	-->
	<record model="ir.ui.view" id="view_offer_model_form">
		<field name="name">dm.offer.model.form</field>
		<field name="model">dm.offer</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Offers">
				<notebook>
					<page string="General">
						<field name="name" select="1"/>
						<field name="code"/>
						<field name="lang_orig"/>
						<field name="copywriter_id"  select="2" on_change = "change_code(type,copywriter_id)"/>
						<field name="recommended_trademark"/>
						<field name="offer_origin_id"/>
						<field name="type" select="2" on_change = "change_code(type,copywriter_id)"/>
						<field name="offer_responsible_id" select="2"/>
						<field name="active" select="2"/>
						<newline/>
						<field name="quotation"/>
						<field name="legal_state"/>
						<separator string="Categories" colspan="4"/>
						<field name="category_ids" colspan="4" nolabel="1"/>
						<separator string="Notes" colspan="4"/>
						<field name="notes" colspan="4"  nolabel="1"/>
						<separator string="Status" colspan="4"/>
						<group col="8" colspan="4">
							<field name="state" nolabel="1" select="1"/>
							<button name="state_open_set" string="Open" states="draft,freeze" type="object"/>
							<button name="state_freeze_set" string="Freeze" states="open" type="object"/>
							<button name="state_close_set" string="Close" states="open,draft,freeze" type="object"/>
							<button name="state_draft_set" string="Reset to Draft" states="closed" type="object"/>
							<button name="go_to_offer" string="Duplicate Offers" states="draft" type="object"/>
						</group>
					</page>
					<page string="Description">
						<separator string="Description" colspan="4"/>
						<field name="desc" nolabel="1"/>
					</page>
				</notebook>	
			</form>
		</field>
	</record>	
	
	<record model="ir.actions.act_window" id="action_offer_model_form">
		<field name="name">Offers Model</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />	
		<field name="domain">[('type','=','model')]</field>
		<field name="context">{'type':'model'}</field>
	</record>
	
	<record model="ir.actions.act_window.view" id="action_offer_model_tree_view">
		<field name="view_mode">tree</field>
		<field name="view_id" ref="view_offer_tree"/>
		<field name="act_window_id" ref="action_offer_model_form"/>
	</record>
	
	<record model="ir.actions.act_window.view" id="action_offer_model_form_view">
		<field name="view_mode">tree</field>
		<field name="view_id" ref="view_offer_model_form"/>
		<field name="act_window_id" ref="action_offer_model_form"/>
	</record>	
	<menuitem name="Direct Marketing/Configuration/Offers/All Offers Model" id="menu_action_offer_model_form" action="action_offer_model_form"/>

	<!--
	=======================================================
	Pre-Offer Views
	=======================================================
	-->
	<record model="ir.actions.act_window" id="action_preoffer_form">
		<field name="name">PreOffers</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" eval = "view_offer_tree" />	
		<field name="domain">[('type','=','preoffer')]</field>
		<field name="context">{'type':'preoffer'}</field>
	</record>
	
	<menuitem name="Direct Marketing/Offers/All PreOffers " id="menu_action_preoffer_form" action="action_preoffer_form"/>
	
	<!--
	======================
	Categories
	======================
	-->
	<record model="ir.ui.view" id="view_offer_category_form">
		<field name="name">dm.offer.category.form</field>
		<field name="model">dm.offer.category</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Offer Category">
				<field name="name" select="1"/>
				<field name="parent_id"/>
			</form>
		</field>
	</record>
	
	<record model="ir.ui.view" id="view_offer_category_list">
		<field name="name">dm.offer.category.list</field>
		<field name="model">dm.offer.category</field>
		<field name="type">tree</field>
		<field name="priority" eval="6"/>
		<field name="arch" type="xml">
			<tree string="Offer Category">
				<field name="complete_name"/>
			</tree>
		</field>
	</record>
	
	<record model="ir.ui.view" id="view_offer_category_tree">
		<field name="name">dm.offer.category.tree</field>
		<field name="model">dm.offer.category</field>
		<field name="type">tree</field>
		<field name="field_parent">child_ids</field>
		<field name="arch" type="xml">
			<tree string="Offer Category">
				<field name="name"/>
			</tree>
		</field>
	</record>
	
	<record model="ir.actions.act_window" id="action_offer_categ_main">
		<field name="name">Offer Categories</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer.category</field>
		<field name="view_type">tree</field>
		<field name="view_id" ref="view_offer_category_tree"/>
		<field name="domain">[('parent_id','=',False)]</field>		
	</record>
	<!--
	<menuitem name="Direct Marketing/Configuration/Offer's Category" id="menu_action_offer_categ_main" action="action_offer_categ_main"/>
	-->

	<record model="ir.actions.act_window" id="action_offer_categ_form">
		<field name="name">All Offers</field>	
		<field name="name">Edit Categories</field>
		<field name="type">ir.actions.act_window</field>			
		<field name="res_model">dm.offer.category</field>
		<field name="view_type">form</field>
	</record>
	
	<menuitem name="Direct Marketing/Configuration/Offers/Edit Categories" sequence="1" id="menu_action_offer_categ_main_form" action="action_offer_categ_form"/>
	
	<record model="ir.actions.act_window" id="action_offer_by_category">
		<field name="name">Offer by Categories</field>	
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="domain">[('category_ids','child_of', [active_id])]</field>
	</record>
  	
	<record model="ir.values" id="ir_action_offer_by_category">
		<field name="key2" eval="'tree_but_open'"/>
		<field name="model" eval="'dm.offer.category'"/>
		<field name="name">Open Offer</field>
		<field name="value" eval="'ir.actions.act_window,%d'%action_offer_by_category"/>
		<field name="object" eval="True"/>
	</record>	
	
	<menuitem name="Direct Marketing/Offers/Offers By Category" id="menu_action_offer_by_category" action="action_offer_categ_main"/>


	<!--
	======================
	History
	======================
	-->

	<record model="ir.ui.view" id="view_offer_history_form">
		<field name="name">dm.offer.history.form</field>
		<field name="model">dm.offer.history</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Actions">
				<field name="offer_id"/>
				<field name="date"/>
				<field name="user_id"/>
				<field name="state"/>
			</form>
		</field>
	</record>
	<record model="ir.ui.view" id="view_offer_history_tree">
		<field name="name">dm.offer.history.tree</field>
		<field name="model">dm.offer.history</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Actions">
				<field name="date"/>
				<field name="user_id"/>
				<field name="state"/>
			</tree>
		</field>
	</record>

	<!--
	======================
	Customer
	======================
	-->		
		
	<record model="ir.ui.view" id="view_dm_customer_form">
		<field name="name">dm.customer.form</field>
		<field name="model">dm.customer</field>
		<field name="type">form</field>
		<field name="arch" type="xml">	
			<form string="Customer">
			<notebook>
				<page string="General">
					<field name="name" select="1" colspan="4"/>
					<field name="customer_number" string="Number" select="1"/>
					<field name="language_id"  select="2"/>
					<separator string="Other Languages" colspan="4"/>							
					<field name="language_ids" colspan="4" nolabel="1"/>
					<separator string="Prospect for Media" colspan="4"/>							
					<field name="prospect_media_ids" colspan="4" nolabel="1"/>
					<separator string="Client for Media" colspan="4"/>							
					<field name="client_media_ids" colspan="4" nolabel="1"/>					
				</page>
				<page string="Address">		
					<field name="address" mode="form,tree" colspan="4" nolabel="1" select="1">
						<form string="Customer contacts">
							<field name="name" select="2"/>
							<field name="title" domain="[('domain', '=', 'contact')]"/>
							<field name="function"/>
							<field name="type" select="2"/>
							<field name="street" select="2"/>
							<field name="street2"/>
							<newline/>
							<field name="zip" select="2"/>
							<field name="city" select="2"/>
							<newline/>
							<field name="country_id" select="2" completion="1"/>
							<field name="state_id" select="2"/>
							<newline/>
							<field name="phone"/>
							<field name="fax"/>
							<newline/>
							<field name="mobile"/>
							<field name="email" select="2" widget="email" />
						</form>
						<tree string="Partner contacts">
							<field name="name" />
							<field name="zip"/>
							<field name="city"/>
							<field name="country_id"/>
						</tree>
					</field>
				</page>
			</notebook>				
			</form>
		</field>
	</record>
	
	<record model="ir.ui.view" id="view_dm_customer_tree">
		<field name="name">dm.customer.tree</field>
		<field name="model">dm.customer</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">	
			<tree string="Customers">
				<field name="customer_number" select="1"/>
				<field name="name" colspan="4" select="1"/>
				<field name="language_id"  select="2"/>
			</tree>
		</field>
	</record>	
	<record model="ir.actions.act_window" id="action_dm_customer_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.customer</field>
		<field name="view_type">form</field>
		<field name="view_id" ref="view_dm_customer_tree"/>
	</record>
	<menuitem name="Direct Marketing/Offers/Customers" id="menu_dm_customer_menu" sequence="1" />
	<menuitem name="Direct Marketing/Offers/Customers/All Customers" id="menu_dm_customer_form" sequence="1" action="action_dm_customer_form"/>
		
	<!--
	=======================================================
	Customer Order Views
	=======================================================
	-->	
	
	<record model="ir.ui.view" id="view_dm_customer_offer_form">
		<field name="name">dm.customer.offer.form</field>
		<field name="model">dm.customer.offer</field>
		<field name="type">form</field>
		<field name="arch" type="xml">	
			<form string="Customer Order">
				<field name="raw_datas" colspan="4" on_change="onchange_rawdatas(raw_datas)"/>
				<field name="customer_id"/>
				<field name="customer_number" select="1"/>
				<field name="action_code"/>
				<field name="offer_step"/>
				<field name="distribution_office"/>
				<field name="title"/>
				<field name="customer_firstname" select="1"/>
				<field name="customer_lastname" select="2"/>
				<newline/>
				<field name="customer_add1"/>
				<field name="customer_add2"/>
				<field name="customer_add3"/>
				<field name="customer_add4"/>
				<field name="country" select="2" colspan="4"/>
				<field name="zip"/>
				<field name="zip_summary"/>
				<field name="note" colspan="4"/>
				<field name="state"/>
				<button string="Confirm" name="set_confirm" type="object" states="draft" colspan="2"/>
			</form>
		</field>
	</record>	
	<record model="ir.ui.view" id="view_dm_customer_offer_tree">
		<field name="name">dm.customer.offer.tree</field>
		<field name="model">dm.customer.offer</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Customer Order">
				<field name="customer_number"/>			
				<field name="customer_firstname"/>
				<field name="customer_lastname"/>
				<field name="country"/>
				<field name="distribution_office"/>
				<field name="state"/>
			</tree>
		</field>
	</record>
	<record model="ir.actions.act_window" id="action_dm_customer_offer_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.customer.offer</field>
		<field name="view_type">form</field>
		<field name="view_id" ref="view_dm_customer_offer_tree"/>
	</record>
	<menuitem name="Direct Marketing/Offers/Customers/All Customer Orders" id="menu_action_dm_customer_offer_form" sequence="2" action="action_dm_customer_offer_form"/>
	</data>
</terp>
