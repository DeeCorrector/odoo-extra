<?xml version="1.0"?>
<terp>
<data>
	<menuitem name="Direct Marketing/Offer" id="menu_dm_offer" sequence="2"/>
	<!--
	=======================================================
	Offer Views
	=======================================================
	-->
	<record model="ir.ui.view" id="view_offer_tree">
		<field name="name">dm.offer.tree</field>
		<field name="model">dm.offer</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Offers">
				<field name="name"/>
				<field name="copywriter_id"/>
				<field name="quotation"/>
				<field name="state"/>	
			</tree>
		</field>
	</record>

	<record model="ir.ui.view" id="view_offer_form">
		<field name="name">dm.offer.form</field>
		<field name="model">dm.offer</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Offers">
				<notebook>
					<page string="General">
						<field name="name" select="1"/>
						<field name="code"/>
						<field name="lang_orig"/>
						<field name="copywriter_id"  select="2"/>
						<field name="recommended_trademark"/>
						<field name="offer_origin_id"/>
						<field name="type" select="2"/>
						<field name="active" select="2"/>
						<newline/>
						<field name="quotation"/>
						<field name="legal_state"/>
						<separator string="Categories" colspan="4"/>
						<field name="category_ids" colspan="4" nolabel="1"/>
						<separator string="Notes" colspan="4"/>
						<field name="notes" colspan="4"  nolabel="1"/>
						<separator string="Status" colspan="4"/>
						<group col="8" colspan="4">
							<field name="state" nolabel="1" select="1"/>
							<button name="state_open_set" string="Open" states="draft,freeze" type="object"/>
							<button name="state_freeze_set" string="Freeze" states="open" type="object"/>
							<button name="state_close_set" string="Close" states="open,draft,freeze" type="object"/>
							<button name="state_draft_set" string="Reset to Draft" states="closed" type="object"/>
						</group>
					</page>
					<page string="Description">
						<separator string="Description" colspan="4"/>
						<field name="desc" nolabel="1"/>
					</page>
					<page string="Advises">
						<separator string="DTP Advices" colspan="4"/>
						<field name="dtp_note" nolabel="1" colspan="4"/>
						<newline/>
						<separator string="Trademark Advices" colspan="4"/>
						<field name="trademark_note" nolabel="1" colspan="4"/>
						<newline/>-->
						<separator string="Production Advices" colspan="4"/>
						<field name="production_note" nolabel="1" colspan="4"/>
						<field name="production_delay"/>
						<field name="production_cost" string="Cost"/>
						<separator string="Purchase Advices" colspan="4"/>
						<field name="purchase_note" nolabel="1" colspan="4"/>
					</page>
					<page string="History">
						<separator string="History" />
						<field name="history_ids" nolabel="1" colspan="4"/>
					</page>
					<page string="Dates">
						<field name="order_date"/>
<!--						<field name="last_modification_date"/>-->
						<field name="plannned_delivery_date"/>
						<field name="delivery_date"/>	
						<newline />
						<field name="fixed_date"/>
						<field name="buffer_delay"/>
					</page>
					<page string="Criteria">
						<separator string="Trademark criteria" colspan="4"/>
						<field name="trademark_sex"/>
						<field name="trademark_age"/>
						<field name="trademark_country_ids" colspan="4"/>		
						<separator string="Geographical criteria" colspan="4"/>
						<field name="forbidden_country_ids" colspan="4"/>		
						<field name="forbidden_state_ids" colspan="4" />	
					</page>
<!--					<page string="Statistics" >-->
<!--						still not define -->
<!--					</page>-->
				</notebook>	
			</form>
		</field>
	</record>	
	
	# ------------------------------------------------------
	# All Offers
	# ------------------------------------------------------

	<record model="ir.actions.act_window" id="action_offer_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />		
	</record>
	<menuitem name="Direct Marketing/Offer/All Offers" id="menu_action_offer_form" action="action_offer_form"/>

	<record model="ir.actions.act_window" id="action_offer_form_all1">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','open')]</field>	
	</record>
	<menuitem name="Direct Marketing/Offer/All Offers/Open Offers" id="menu_action_offer_form_all1" action="action_offer_form_all1"/>

	<record model="ir.actions.act_window" id="action_offer_form_all2">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','draft')]</field>		
	</record>
	<menuitem name="Direct Marketing/Offer/All Offers/Draft Offers" id="menu_action_offer_form_all2" action="action_offer_form_all2"/>

	<record model="ir.actions.act_window" id="action_offer_form_all3">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','closed')]</field>		
	</record>
	<menuitem name="Direct Marketing/Offer/All Offers/Closed Offers" id="menu_action_offer_form_all3" action="action_offer_form_all3"/>

	# ------------------------------------------------------
	# My Offers
	# ------------------------------------------------------

	<record model="ir.actions.act_window" id="action_offer_form_my">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('create_uid','=',uid)]</field>
	</record>
	<menuitem name="Direct Marketing/Offer/My Offers" id="menu_action_offer_form_my" action="action_offer_form_my"/>
 
	<record model="ir.actions.act_window" id="action_offer_form_my1">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','open'),('create_uid','=',uid)]</field>	
	</record>
	<menuitem name="Direct Marketing/Offer/My Offers/Open Offers" id="menu_action_offer_form_my1" action="action_offer_form_my1"/>

	<record model="ir.actions.act_window" id="action_offer_form_my2">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','draft'),('create_uid','=',uid)]</field>		
	</record>
	<menuitem name="Direct Marketing/Offer/My Offers/Draft Offers" id="menu_action_offer_form_my2" action="action_offer_form_my2"/>

	<record model="ir.actions.act_window" id="action_offer_form_my3">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref = "view_offer_tree" />
		<field name="domain">[('state','=','closed'),('create_uid','=',uid)]</field>		
	</record>
	<menuitem name="Direct Marketing/Offer/My Offers/Closed Offers" id="menu_action_offer_form_my3" action="action_offer_form_my3"/>
	
	<!--
	======================
	Categories
	======================
	-->
	<record model="ir.ui.view" id="view_offer_category_form">
		<field name="name">dm.offer.category.form</field>
		<field name="model">dm.offer.category</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Offer Category">
				<field name="name" select="1"/>
				<field name="parent_id"/>
				<field name="domain" select="1"/>
			</form>
		</field>
	</record>
	
	<record model="ir.ui.view" id="view_offer_category_list">
		<field name="name">dm.offer.category.list</field>
		<field name="model">dm.offer.category</field>
		<field name="type">tree</field>
		<field name="priority" eval="6"/>
		<field name="arch" type="xml">
			<tree string="Offer Category">
				<field name="complete_name"/>
			</tree>
		</field>
	</record>
	
	<record model="ir.ui.view" id="view_offer_category_tree">
		<field name="name">dm.offer.category.tree</field>
		<field name="model">dm.offer.category</field>
		<field name="type">tree</field>
		<field name="field_parent">child_ids</field>
		<field name="arch" type="xml">
			<tree string="Offer Category">
				<field name="name"/>
			</tree>
		</field>
	</record>
	
	<record model="ir.actions.act_window" id="action_offer_categ_main">
		<field name="name">Offer Categories</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.offer.category</field>
		<field name="view_type">tree</field>
		<field name="view_id" ref="view_offer_category_tree"/>
		<field name="domain">[('parent_id','=',False)]</field>		
	</record>
	<!--
	<menuitem name="Direct Marketing/Configuration/Offer's Category" id="menu_action_offer_categ_main" action="action_offer_categ_main"/>
	-->

	<record model="ir.actions.act_window" id="action_offer_categ_form">
		<field name="name">Edit Categories</field>
		<field name="type">ir.actions.act_window</field>			
		<field name="res_model">dm.offer.category</field>
		<field name="view_type">form</field>
	</record>
	
	<menuitem name="Direct Marketing/Configuration/Offers/Edit Categories" sequence="1" id="menu_action_offer_categ_main_form" action="action_offer_categ_form"/>
	
	<record model="ir.actions.act_window" id="action_offer_by_category">
		<field name="name">Offer by Categories</field>	
		<field name="res_model">dm.offer</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="domain">[('category_ids','child_of', [active_id])]</field>
	</record>
  	
	<record model="ir.values" id="ir_action_offer_by_category">
		<field name="key2" eval="'tree_but_open'"/>
		<field name="model" eval="'dm.offer.category'"/>
		<field name="name">Open Offer</field>
		<field name="value" eval="'ir.actions.act_window,%d'%action_offer_by_category"/>
		<field name="object" eval="True"/>
	</record>	
	
	<menuitem name="Direct Marketing/Offer/Offers By Category" id="menu_action_offer_by_category" action="action_offer_categ_main"/>

	<record model="ir.ui.view" id="view_offer_history_form">
		<field name="name">dm.offer.history.form</field>
		<field name="model">dm.offer.history</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Actions">
				<field name="offer_id"/>
				<field name="date"/>
				<field name="user_id"/>
				<field name="state"/>
			</form>
		</field>
	</record>
	<record model="ir.ui.view" id="view_offer_history_tree">
		<field name="name">dm.offer.history.tree</field>
		<field name="model">dm.offer.history</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Actions">
				<field name="date"/>
				<field name="user_id"/>
				<field name="state"/>
			</tree>
		</field>
	</record>

	<record model="ir.ui.view" id="view_dm_preoffer_form">
		<field name="name">dm.dm.preoffer.form</field>
		<field name="model">dm.preoffer</field>
		<field name="type">form</field>
		<field name="arch" type="xml">	
			<form string="PreOffer">
				<field name="name" colspan="4"/>
				<field name="creator_id"/>
				<field name="copywriter_id"/>		
				<field name="market_id"/>
				<field name="media_id"/>
				<field name="type"/>
				<field name="order_number"/>
				<field name="order_date" colspan="4"/>
				<field name="plannned_delivery_date"/>
				<field name="delivery_date"/>
				<separator string="Summary" colspan="4"/>		
				<field name="summary" nolabel="1" colspan="4"/>
			</form>
		</field>
	</record>

	<record model="ir.ui.view" id="view_dm_preoffer_tree">
		<field name="name">dm.preoffer.tree</field>
		<field name="model">dm.preoffer</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">	
			<tree string="Document Category">
				<field name="name" colspan="4"/>
				<field name="type"/>
				<field name="order_number"/>
				<field name="order_date" colspan="4"/>
				<field name="plannned_delivery_date"/>
				<field name="delivery_date"/>
			</tree>
		</field>
	</record>	
	<record model="ir.actions.act_window" id="action_dm_preoffer_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.preoffer</field>
		<field name="view_type">form</field>
		<field name="view_id" ref="view_dm_preoffer_tree"/>
	</record>
	<menuitem name="Direct Marketing/Configuration/Offers/Preoffer" id="menu_dm_preoffer_form" sequence="2" action="action_dm_preoffer_form"/>	
</data>
</terp>
