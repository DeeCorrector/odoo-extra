<?xml version="1.0"?>
<openerp>
<data>
	<menuitem name="Direct Marketing" icon="terp-mrp" id="menu_dm_root"/>
	<menuitem name="Direct Marketing/Configuration" id="menu_dm_config" sequence="1" groups="res_groups_offeradmin,res_groups_offermanager,res_groups_campaignadmin,res_groups_campaignmanager"/>
	<menuitem name="Direct Marketing/Configuration/Campaigns" id="menu_dm_config_campaign" sequence="1" groups="res_groups_offeradmin,res_groups_campaignadmin,res_groups_campaignmanager"/>
	<menuitem name="Direct Marketing/Configuration/Campaigns/Customer Files" id="menu_dm_config_camp_custfiles" sequence="1" groups="res_groups_offeradmin,res_groups_campaignadmin,res_groups_campaignmanager"/>
	<menuitem name="Direct Marketing/Campaigns" id="menu_dm_campaign" sequence="4"/>

<record id="res_groups_campaignadmin" model="res.groups">
<field name="name">Campaign Admin</field>
</record>
<record id="res_groups_campaignmanager" model="res.groups">
<field name="name">Campaign Manager</field>
</record>

	<!--
	=======================================================
	Campaign Views
	=======================================================
	-->

	<record model="ir.ui.view" id="view_campaign_calendar">
		<field name="name">dm.campaign.calendar</field>
		<field name="model">dm.campaign</field>
		<field name="type">calendar</field>
		<field eval="2" name="priority"/>
		<field name="arch" type="xml">
			<calendar color="responsible_id" date_start="date_start" string="Campaigns">
				<field name="name" string="Name"/>
				<field name="country_id" />
			</calendar>
		</field>
	</record>

	<record model="ir.ui.view" id="view_campaign_tree">
		<field name="name">dm.campaign.tree</field>
		<field name="model">dm.campaign</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Campaigns">
				<field name="name" string="Name"/>
				<field name="campaign_type"/>
				<field name="date_start"/>
				<field name="responsible_id" />
				<field name="country_id" />
<!--				<field name="country_id" />-->
				<field name="state"/>
			</tree>
		</field>
	</record>

	<record model="ir.ui.view" id="view_campaign_form">
		<field name="name">dm.campaign.form</field>
		<field name="model">dm.campaign</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Campaigns">
				<group colspan="4" col="4">
					<field name="name" string="Name" select="1"/>
					<field name="code1" string="Code" select="2"/>
				</group>
				<notebook colspan="4">
					<page string="General">
						<separator string="Global Information" colspan="4"/>
<!--						<field name="parent_id" string="Category" domain="[('type','=','view')]"/>-->
						<field name="country_id" select="1" on_change="onchange_lang_currency(country_id)"/>
						<field name="offer_id" select="1"/>
						<field name="lang_id" select="2"/>
						<field name="currency_id" select="2"/>

						<field name="campaign_type" select="2"/>
						<field name="date_start" select="2"/>
						<field name="date"/>
<!--						<field name="partner_id"/>-->
						<field name="dealer_id"/>
						<field name="trademark_id"/>
						<field name="responsible_id" />
						<separator string="Tasks Management" colspan="4"/>
						<group colspan="4">
						<field name="project_id" string="Retro Planning"/>
						<button string="Create Retro-Planning" name="%(dm.campaign_wiz)d" type="action" attrs="{'invisible':[('state','!=','open'),('project_id','!=',False)]}"/>
						</group>
						<separator string="Process State" colspan="4"/>
						<field name="planning_state" select="2" nolabel="0"/>
						<field name="manufacturing_state" select="2" nolabel="0"/>
<!--						<field name="campaign_stat_ids"/>-->
						<separator string="Campaign Status" colspan="4"/>
						<group col="10" colspan="4">
							<field name="state" readonly="1" select="2" nolabel="1"/>
							<button name="state_open_set" string="Open" states="draft,pending" type="object"/>
							<button name="state_close_set" string="Close" states="draft,open,pending" type="object"/>
							<button name="state_pending_set" string="Set pending" states="open" type="object"/>
							<button name="state_draft_set" string="Set to draft" states="open,pending,close" type="object"/>
						</group>
					</page>
					<page string="Propositions">
						<field name="proposition_ids" nolabel="1" context="date1=date_start">
							<form string="Propositions">
							<notebook colspan="4">
								<page string="General">
									<field name="name" string="Name" select="1"/>
									<field name="code1" string="Code" select="2"/>
<!--									<field name="camp_id"/>-->
									<field name="date_start" select="2"/>
									<field name="proposition_type" select="1"/>
									<field name="initial_proposition_id" select="1"/>
									<field name="forwarding_charges"/>
									<field name="quantity_max" string="Addresses Quantity"/>
									<field name="sale_rate"/>
									<separator string="Notes" colspan="4"/>
									<field name="notes" colspan="4" nolabel="1"/>
								</page>
								<page string="Prices">
									<separator string="Prices policy" colspan="4"/>
									<field name="customer_pricelist_id"/>
									<button string="Get Products" name="%(dm.wizard_proposition_products)d" type="action"/>
									<field name="product_ids" colspan="4" nolabel="1">
										<form string="Catalogue">
											<field name="offer_step_type"/>
											<field name="product_id" string="Item"/>
											<field name="price"/>
											<field name="item_type"/>
											<field name="notes"/>
										</form>
										<tree string="Catalogue" editable="bottom">
											<field name="offer_step_type"/>
											<field name="product_id" string="Item"/>
											<field name="price"/>
				<!--							<field name="qty_planned"/>
											<field name="qty_real"/>-->
											<field name="item_type"/>
											<field name="notes"/>
										</tree>
									</field>
				<!--					<field name="starting_mail_price"/>-->
									<separator string="Payment Methods" colspan="4"/>
									<field name="payment_methods" colspan="4" nolabel="1"/>
								</page>
								<page string="Segments">
								<field name="segment_ids" colspan="4" nolabel="1">
									<form string="Segments">
										<field name="name" string="Name" select="1"/>
										<field name="code" string="Action Code"/>
										<field name="file_id" />
										<field name="active" />
										<field name="quantity_add" select="2"/>
										<field name="raw_quantity" select="2"/>
										<newline/>
										<field name="split_id" />
										<field name="reuse_id" />
										<newline/>
										<field name="start_census"/>
										<field name="end_census"/>
										<field name="deduplication_level"/>
										<field name="note" colspan="4"/>
									</form>
									<tree string="Segments">
										<field name="name" string="Name" select="1"/>
										<field name="deduplication_level" />
										<field name="code" string="Action Code" select="2"/>
										<field name="quantity_add"/>
									</tree>
								</field>
<!--								<field name="keep_segments" string="Keep Segments at Duplication"/>-->
								</page>
							</notebook>
							</form>
							<tree string="Propositions">
<!--								<field name="camp_id"/>-->
								<field name="name" string="Name"/>
								<field name="code1" string="Code"/>
								<field name="date_start" colspan="4"/>
								<field name="quantity_max" string="Quantity"/>
								<field name="sale_rate"/>
								<field name="proposition_type"/>
							</tree>
						</field>
					</page>
					<page string="Manufacturing">
						<separator string="Manufacturing" colspan="4"/>
						<field name="campaign_group_id" colspan="2"/>
						<separator string="Costs" colspan="4"/>
						<field name="manufacturing_costs" colspan="2"/>
					</page>
					<page string="Supplying">
						<field name="purchase_line_ids" colspan="4" nolabel="1">
							<form string="Purchase Line">
							<group colspan="4">
								<field name="product_id"/>
								<newline/>
								<field name="quantity"/>
								<field name="uom_id"/>
								<field name="constraint"/>
								<field name="date_planned"/>
<!--								<field name="trigger"/>-->
							</group>
								<separator string="Notes" colspan="4"/>
								<field name="notes" colspan="4" nolabel="1"/>
								<field name="purchase_order_ids" colspan="4" nolabel="1"/>
								<field name="state" nolabel="1"/>
							</form>
<!--							<tree string="Purchase Lines" editable="bottom">-->
							<tree string="Purchase Lines">
								<field name="product_id"/>
								<field name="quantity"/>
								<field name="uom_id"/>
								<field name="constraint"/>
								<field name="date_planned"/>
<!--								<field name="trigger"/>-->
								<field name="state"/>
								<button name="po_generate" string="Generate Purchase Orders" states="pending" type="object"/>
							</tree>
						</field>
						<button name="po_check" string="Check Purchase Orders Status" type="object" colspan="2" col="2"/>
					</page>
					<page string="Desktop Publishing">
							<field name="dtp_dates_ids" nolabel="1" colspan="4">
								<form string="DTP date">
									<field name="name" colspan="3"/>
									<field name="theorical_date"/>
									<field name="reviewed_date"/>
									<field name="planned_date"/>
									<field name="real_date"/>
									<field name="template"/>
								</form>
								<tree string="DTP dates" editable="bottom">
									<field name="name"/>
									<field name="theorical_date"/>
									<field name="reviewed_date"/>
									<field name="planned_date"/>
									<field name="real_date"/>
								</tree>
							</field>
					</page>
					<page string="Customers Files">
						<field name="deduplicator_id"/>
						<field name="dedup_order_date"/>
						<field name="dedup_validity_date"/>
						<field name="dedup_delivery_date"/>
					</page>
					<page string="Notes">
						<separator string="Notes" colspan="4"/>
						<field name="notes" colspan="4" nolabel="1"/>
					</page>
				</notebook>
			</form>
		</field>
	</record>

        <!-- All Campaigns -->

	<record model="ir.actions.act_window" id="action_campaign_form_all">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form,calendar</field>
		<field name="view_id" ref="view_campaign_tree"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_tree_all_view">
		<field name="sequence" eval="1"/>
		<field name="view_mode">tree</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="act_window_id" ref="action_campaign_form_all"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_form_all_view">
		<field name="sequence" eval="2"/>
		<field name="view_mode">form</field>
		<field name="view_id" ref="view_campaign_form"/>
		<field name="act_window_id" ref="action_campaign_form_all"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_calendar_all_view">
		<field name="sequence" eval="3"/>
		<field name="view_mode">calendar</field>
		<field name="view_id" ref="view_campaign_calendar"/>
		<field name="act_window_id" ref="action_campaign_form_all"/>
	</record>

	<menuitem name="Direct Marketing/Campaigns/All Campaigns" id="menu_action_campaign_form_all" action="action_campaign_form_all"/>


	<record model="ir.actions.act_window" id="action_campaign_form_all_open">
		<field name="name">Open Campaigns</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form,calendar</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="domain">[('state','=','open')]</field>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_tree_all_open_view">
		<field name="sequence" eval="1"/>
		<field name="view_mode">tree</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="act_window_id" ref="action_campaign_form_all_open"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_form_all_open_view">
		<field name="sequence" eval="2"/>
		<field name="view_mode">form</field>
		<field name="view_id" ref="view_campaign_form"/>
		<field name="act_window_id" ref="action_campaign_form_all_open"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_calendar_all_open_view">
		<field name="sequence" eval="3"/>
		<field name="view_mode">calendar</field>
		<field name="view_id" ref="view_campaign_calendar"/>
		<field name="act_window_id" ref="action_campaign_form_all_open"/>
	</record>
	<menuitem name="Direct Marketing/Campaigns/All Campaigns/Open Campaigns" id="menu_action_campaign_form_all_open" action="action_campaign_form_all_open"/>


	<record model="ir.actions.act_window" id="action_campaign_form_all2">
		<field name="name">Draft Campaigns</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="domain">[('state','=','draft')]</field>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_tree_all_draft_view">
		<field name="sequence" eval="1"/>
		<field name="view_mode">tree</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="act_window_id" ref="action_campaign_form_all2"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_form_all_draft_view">
		<field name="sequence" eval="2"/>
		<field name="view_mode">form</field>
		<field name="view_id" ref="view_campaign_form"/>
		<field name="act_window_id" ref="action_campaign_form_all2"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_calendar_all_draft_view">
		<field name="sequence" eval="3"/>
		<field name="view_mode">calendar</field>
		<field name="view_id" ref="view_campaign_calendar"/>
		<field name="act_window_id" ref="action_campaign_form_all2"/>
	</record>
	<menuitem name="Direct Marketing/Campaigns/All Campaigns/Draft Campaigns" id="menu_action_campaign_form_all2" action="action_campaign_form_all2"/>


	<record model="ir.actions.act_window" id="action_campaign_form_all3">
		<field name="name">Closed Campaigns</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form,calendar</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="domain">[('state','=','close')]</field>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_tree_all_closed_view">
		<field name="sequence" eval="1"/>
		<field name="view_mode">tree</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="act_window_id" ref="action_campaign_form_all3"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_form_all_closed_view">
		<field name="sequence" eval="2"/>
		<field name="view_mode">form</field>
		<field name="view_id" ref="view_campaign_form"/>
		<field name="act_window_id" ref="action_campaign_form_all3"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_campaign_calendar_all_closed_view">
		<field name="sequence" eval="3"/>
		<field name="view_mode">calendar</field>
		<field name="view_id" ref="view_campaign_calendar"/>
		<field name="act_window_id" ref="action_campaign_form_all3"/>
	</record>
	<menuitem name="Direct Marketing/Campaigns/All Campaigns/Closed Campaigns" id="menu_action_campaign_form_all3" action="action_campaign_form_all3"/>

        <!-- My Campaings -->


	<record model="ir.actions.act_window" id="action_campaign_form_my">
		<field name="name">My Campaigns</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form,calendar</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="domain">[('responsible_id','=',uid)]</field>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_campaign_tree">
		<field name="sequence" eval="1"/>
		<field name="view_mode">tree</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="act_window_id" ref="action_campaign_form_my"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_campaign_form">
		<field name="sequence" eval="2"/>
		<field name="view_mode">form</field>
		<field name="view_id" ref="view_campaign_form"/>
		<field name="act_window_id" ref="action_campaign_form_my"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_campaign_calendar">
		<field name="sequence" eval="3"/>
		<field name="view_mode">calendar</field>
		<field name="view_id" ref="view_campaign_calendar"/>
		<field name="act_window_id" ref="action_campaign_form_my"/>
	</record>
	<menuitem name="Direct Marketing/Campaigns/My Campaigns" id="menu_action_campaign_form_my" action="action_campaign_form_my"/>



	<record model="ir.actions.act_window" id="action_campaign_form_my1">
		<field name="name">My Open Campaigns</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form,calendar</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="domain">[('state','=','open'),('responsible_id','=',uid)]</field>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_open_campaign_tree">
		<field name="sequence" eval="1"/>
		<field name="view_mode">tree</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="act_window_id" ref="action_campaign_form_my1"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_open_campaign_form">
		<field name="sequence" eval="2"/>
		<field name="view_mode">form</field>
		<field name="view_id" ref="view_campaign_form"/>
		<field name="act_window_id" ref="action_campaign_form_my1"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_open_campaign_calendar">
		<field name="sequence" eval="3"/>
		<field name="view_mode">calendar</field>
		<field name="view_id" ref="view_campaign_calendar"/>
		<field name="act_window_id" ref="action_campaign_form_my1"/>
	</record>
	<menuitem name="Direct Marketing/Campaigns/My Campaigns/Open Campaigns" id="menu_action_campaign_form_my1" action="action_campaign_form_my1"/>


	<record model="ir.actions.act_window" id="action_campaign_form_my2">
		<field name="name">My Draft Campaigns</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form,calendar</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="domain">[('state','=','draft'),('responsible_id','=',uid)]</field>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_draft_campaign_tree">
		<field name="sequence" eval="1"/>
		<field name="view_mode">tree</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="act_window_id" ref="action_campaign_form_my2"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_draft_campaign_form">
		<field name="sequence" eval="2"/>
		<field name="view_mode">form</field>
		<field name="view_id" ref="view_campaign_form"/>
		<field name="act_window_id" ref="action_campaign_form_my2"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_draft_campaign_calendar">
		<field name="sequence" eval="3"/>
		<field name="view_mode">calendar</field>
		<field name="view_id" ref="view_campaign_calendar"/>
		<field name="act_window_id" ref="action_campaign_form_my2"/>
	</record>
	<menuitem name="Direct Marketing/Campaigns/My Campaigns/Draft Campaigns" id="menu_action_campaign_form_my2" action="action_campaign_form_my2"/>


	<record model="ir.actions.act_window" id="action_campaign_form_my3">
		<field name="name">My Closed Campaigns</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form,calendar</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="domain">[('state','=','close'),('responsible_id','=',uid)]</field>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_closed_campaign_tree">
		<field name="sequence" eval="1"/>
		<field name="view_mode">tree</field>
		<field name="view_id" ref="view_campaign_tree"/>
		<field name="act_window_id" ref="action_campaign_form_my3"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_closed_campaign_form">
		<field name="sequence" eval="2"/>
		<field name="view_mode">form</field>
		<field name="view_id" ref="view_campaign_form"/>
		<field name="act_window_id" ref="action_campaign_form_my3"/>
	</record>
	<record model="ir.actions.act_window.view" id="action_my_closed_campaign_calendar">
		<field name="sequence" eval="3"/>
		<field name="view_mode">calendar</field>
		<field name="view_id" ref="view_campaign_calendar"/>
		<field name="act_window_id" ref="action_campaign_form_my3"/>
	</record>
	<menuitem name="Direct Marketing/Campaigns/My Campaigns/Closed Campaigns" id="menu_action_campaign_form_my3" action="action_campaign_form_my3"/>

	<!--
	=======================================================
	Campaign Model Views
	=======================================================
	-->

	<record model="ir.ui.view" id="view_campaign_model_tree">
		<field name="name">dm.campaign.model.tree</field>
		<field name="model">dm.campaign</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="All Campaigns Model">
				<field name="name" string="Name"/>
				<field name="campaign_type"/>
				<field name="country_id" />
			</tree>
		</field>
	</record>

	<record model="ir.ui.view" id="view_campaign_model_form">
		<field name="name">dm.campaign.model.form</field>
		<field name="model">dm.campaign</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Campaigns Model">
				<notebook colspan="4">
					<page string="General">
						<separator string="Global Information" colspan="4"/>
						<group col="10" colspan="4">
							<field name="name" string="Name" select="1" />
							<field name="code1" string="Code" select="2"/>
						</group>
						<group col="10" colspan="4">
							<field name="country_id" select="1"/>
							<field name="offer_id"/>
						</group>
						<separator string="Notes" colspan="4"/>
						<field name="notes" colspan="4" nolabel="1"/>
						<button name="copy_campaign" string="Create Campaign" type="object"/>
					</page>
					<page string="Propositions">
						<field name="proposition_ids" nolabel="1">
							<form string="Propositions">
							<notebook colspan="4">
								<page string="General">
									<field name="name" string="Name" select="1"/>
									<field name="code1" string="Code" select="2"/>
									<field name="date_start" select="2"/>
									<field name="proposition_type" select="1"/>
									<field name="initial_proposition_id" select="1"/>
									<field name="forwarding_charges"/>
									<field name="quantity_max" string="Addresses Quantity"/>
									<field name="sale_rate"/>
									<separator string="Notes" colspan="4"/>
									<field name="notes" colspan="4" nolabel="1"/>
								</page>
								<page string="Prices">
									<separator string="Prices policy" colspan="4"/>
									<field name="customer_pricelist_id"/>
									<button string="Get Products" name="%(dm.wizard_proposition_products)d" type="action"/>
									<field name="product_ids" colspan="4" nolabel="1">
										<form string="Catalogue">
											<field name="offer_step_type"/>
											<field name="product_id" string="Item"/>
											<field name="price"/>
											<field name="item_type"/>
											<field name="notes"/>
										</form>
										<tree string="Catalogue" editable="bottom">
											<field name="offer_step_type"/>
											<field name="product_id" string="Item"/>
											<field name="price"/>
				<!--							<field name="qty_planned"/>
											<field name="qty_real"/>-->
											<field name="item_type"/>
											<field name="notes"/>
										</tree>
									</field>
				<!--					<field name="starting_mail_price"/>-->
									<separator string="Payment Methods" colspan="4"/>
									<field name="payment_methods" colspan="4" nolabel="1"/>
								</page>
								<page string="Segments">
								<field name="segment_ids" colspan="4" nolabel="1">
									<form string="Segments">
										<field name="name" string="Name" select="1"/>
										<field name="code" string="Action Code"/>
										<field name="file_id" />
										<field name="active" />
										<field name="quantity_add" select="2"/>
										<field name="raw_quantity" select="2"/>
										<newline/>
										<field name="split_id" />
										<field name="reuse_id" />
										<newline/>
										<field name="start_census"/>
										<field name="end_census"/>
										<field name="deduplication_level"/>
										<field name="note" colspan="4"/>
									</form>
									<tree string="Segments">
										<field name="name" string="Name" select="1"/>
										<field name="deduplication_level" />
										<field name="code" string="Action Code" select="2"/>
										<field name="quantity_add"/>
									</tree>
								</field>
<!--								<field name="keep_segments" string="Keep Segments at Duplication"/>-->
								</page>
							</notebook>
							</form>
							<tree string="Propositions">
<!--								<field name="camp_id"/>-->
								<field name="name" string="Name"/>
								<field name="code1" string="Code"/>
								<field name="date_start" colspan="4"/>
								<field name="quantity_max" string="Quantity"/>
								<field name="sale_rate"/>
								<field name="proposition_type"/>
							</tree>
						</field>
					</page>
				</notebook>
			</form>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_campaign_model_form">
		<field name="name">Campaign Model</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="domain">[('campaign_type','=','model')]</field>
		<field name="context">{'campaign_type':'model'}</field>
	</record>

	<record model="ir.actions.act_window.view" id="action_campaign_model_tree_view">
		<field name="view_mode">tree</field>
		<field name="sequence">1</field>
		<field name="view_id" ref="view_campaign_model_tree"/>
		<field name="act_window_id" ref="action_campaign_model_form"/>
	</record>

	<record model="ir.actions.act_window.view" id="action_campaign_model_form_view">
		<field name="view_mode">form</field>
		<field name="sequence">10</field>
		<field name="view_id" ref="view_campaign_model_form"/>
		<field name="act_window_id" ref="action_campaign_model_form"/>
	</record>
	<menuitem name="Direct Marketing/Configuration/Campaigns/All Campaigns Model" id="menu_action_campaign_model_form" action="action_campaign_model_form"/>


	<!--
	=======================================================
	Proposition Views
	=======================================================
	-->
	<record model="ir.ui.view" id="view_campaign_proposition_form">
		<field name="name">dm.campaign.proposition.form</field>
		<field name="model">dm.campaign.proposition</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Propositions">
			<notebook colspan="4">
				<page string="General">
					<field name="name" string="Name" select="1"/>
					<field name="code1" string="Code" select="2"/>
					<field name="camp_id"/>
					<field name="date_start" select="2"/>
					<field name="proposition_type" select="1"/>
					<field name="initial_proposition_id" select="1"/>
					<newline/>
					<field name="forwarding_charges"/>
					<field name="quantity_max" string="Addresses Quantity"/>
					<field name="sale_rate"/>
					<separator string="Notes" colspan="4"/>
					<field name="notes" colspan="4" nolabel="1"/>
				</page>
				<page string="Prices">
					<separator string="Prices policy" colspan="4"/>
					<group colspan="4">
					<field name="customer_pricelist_id"/>
					<button string="Get Products" name="%(dm.wizard_proposition_products)d" type="action"/>
					</group>
					<field name="force_sm_price"/>
					<field name="sm_price" attrs="{'readonly':[('force_sm_price','=',0)]}"/>
					<field name="product_ids" colspan="4" nolabel="1">
						<form string="Catalogue">
							<field name="offer_step_type"/>
							<field name="product_id" string="Item"/>
							<field name="price"/>
							<field name="item_type"/>
							<field name="notes"/>
						</form>
						<tree string="Catalogue" editable="bottom">
							<field name="offer_step_type"/>
							<field name="product_id" string="Item"/>
							<field name="price"/>
<!--							<field name="qty_planned"/>
							<field name="qty_real"/>-->
							<field name="item_type"/>
							<field name="notes"/>
						</tree>
					</field>
<!--					<field name="starting_mail_price"/>-->
					<separator string="Payment Methods" colspan="4"/>
					<field name="payment_methods" colspan="4" nolabel="1"/>
				</page>
				<page string="Segments">
				<field name="segment_ids" colspan="4" nolabel="1">
					<form string="Segments">
						<field name="name" string="Name" select="1"/>
						<field name="code" string="Action Code"/>
						<field name="file_id" />
						<field name="active" />
						<field name="quantity_add" select="2"/>
						<field name="raw_quantity" select="2"/>
						<newline/>
						<field name="split_id" />
						<field name="reuse_id" />
						<newline/>
						<field name="start_census"/>
						<field name="end_census"/>
						<field name="deduplication_level"/>
						<field name="note" colspan="4"/>
					</form>
					<tree string="Segments">
						<field name="name" string="Name" select="1"/>
						<field name="deduplication_level" />
						<field name="code" string="Action Code" select="2"/>
						<field name="quantity_add"/>
					</tree>
				</field>
<!--				<field name="keep_segments" string="Keep Segments at Duplication"/>-->
				</page>
			</notebook>
			</form>
		</field>
	</record>

	<record model="ir.ui.view" id="view_campaign_proposition_tree">
		<field name="name">dm.campaign.proposition.tree</field>
		<field name="model">dm.campaign.proposition</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Propositions">
				<field name="camp_id"/>
				<field name="name" string="Name"/>
				<field name="code1" string="Code"/>
				<field name="date_start" colspan="4"/>
				<field name="quantity_max" string="Quantity"/>
				<field name="sale_rate"/>
				<field name="proposition_type"/>
			</tree>
		</field>
	</record>

	<record model="ir.ui.view" id="view_campaign_proposition_calendar">
		<field name="name">dm.campaign.proposition.calendar</field>
		<field name="model">dm.campaign.proposition</field>
		<field name="type">calendar</field>
		<field eval="2" name="priority"/>
		<field name="arch" type="xml">
			<calendar color="camp_id" date_start="date_start" string="Propositions">
				<field name="name"/>
				<field name="proposition_type"/>
			</calendar>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_campaign_proposition">
		<field name="name">All Campaigns Propositions</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign.proposition</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form,calendar</field>
		<field name="view_id" ref="view_campaign_proposition_tree"/>
	</record>
	<menuitem name="Direct Marketing/Campaigns/All Campaigns Propositions" id="menu_action_campaign_proposition" action="action_campaign_proposition"/>

	<record model="ir.actions.act_window" id="action_campaign_proposition_my">
		<field name="name">My Campaigns Propositions</field>
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign.proposition</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form,calendar</field>
		<field name="view_id" ref="view_campaign_proposition_tree"/>
		<field name="domain">[('user_id','=',uid)]</field>
	</record>
	<menuitem name="Direct Marketing/Campaigns/My Campaigns Propositions" id="menu_action_campaign_proposition_my" action="action_campaign_proposition_my"/>

	<!--
	=======================================================
	Campaign proposition segment
	=======================================================
	-->

	<record model="ir.ui.view" id="view_campaign_proposition_segment_form">
		<field name="name">dm.campaign.proposition.segment.form</field>
		<field name="model">dm.campaign.proposition.segment</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Segments">
				<field name="name" string="Name" select="1"/>
				<field name="code" string="Action Code"/>
				<field name="proposition_id" />
				<field name="file_id" />
<!--				<field name="sequence"/>-->
				<field name="active" />
				<field name="quantity_add" select="2"/>
				<field name="raw_quantity" select="2"/>
				<field name="split_id" />
				<field name="reuse_id" />
				<newline/>
				<field name="start_census"/>
				<field name="end_census"/>
				<field name="deduplication_level"/>
<!--				<field name="action_code" string="Action Code" select="2"/>-->
				<field name="note" colspan="4"/>
			</form>
		</field>
	</record>

	<record model="ir.ui.view" id="view_campaign_proposition_segment_tree">
		<field name="name">dm.campaign.proposition.segment.tree</field>
		<field name="model">dm.campaign.proposition.segment</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Segments">
				<field name="name" string="Name"/>
<!--				<field name="sequence" />-->
				<field name="code" string="Action Code"/>
				<field name="quantity_add"/>
			</tree>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_campaign_proposition_segment_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign.proposition.segment</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="view_campaign_proposition_segment_tree"/>
	</record>
	<menuitem name="Direct Marketing/Configuration/Campaigns/All Campaigns Segments" id="menu_action_campaign_proposition_segment_form" action="action_campaign_proposition_segment_form"/>

	<!--
	=======================================================
	Campaign group
	=======================================================
	-->

	<record model="ir.ui.view" id="view_campaign_group_form">
		<field name="name">dm.campaign.group.form</field>
		<field name="model">dm.campaign.group</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Group">
				<field name="name" select="1"/>
				<separator string="Tasks Management" colspan="4"/>
					<group colspan="4">
					<field name="project_id" string="Retro Planning"/>
					<button string="Create Retro-Planning" name="%(dm.campaign_group_wiz)d" type="action"/>
					</group>
				<field name="campaign_ids" colspan="4" nolabel="1" select="2"/>
			</form>
		</field>
	</record>

	<record model="ir.ui.view" id="view_campaign_group_tree">
		<field name="name">dm.campaign.group.tree</field>
		<field name="model">dm.campaign.group</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Groups">
				<field name="name"/>
			</tree>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_campaign_group_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign.group</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="view_campaign_group_tree"/>
	</record>
	<menuitem name="Direct Marketing/Campaigns/All Campaigns Groups" id="menu_action_campaign_group_form" action="action_campaign_group_form"/>

	<!--
	Campaign type
	-->

	<record model="ir.ui.view" id="view_campaign_type_form">
		<field name="name">dm.campaign.type.form</field>
		<field name="model">dm.campaign.type</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Type">
				<field name="name" select="1"/>
				<field name="code" select="2"/>
			</form>
		</field>
	</record>

	<record model="ir.ui.view" id="view_campaign_type_tree">
		<field name="name">dm.campaign.type.tree</field>
		<field name="model">dm.campaign.type</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Types">
				<field name="name"/>
				<field name="code"/>
			</tree>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_campaign_type_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign.type</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="view_campaign_type_tree"/>
	</record>
	<menuitem name="Direct Marketing/Configuration/Campaigns/All Campaigns Types" id="menu_action_campaign_type_form" action="action_campaign_type_form"/>

<!--
	<record model="ir.actions.act_window" id="action_campaign_trademark_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">res.partner</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="base.view_partner_tree"/>
		<field name="domain">[('category_id','like','Trademark')]</field>
		<field name="context">{'category_id':'Trademark'}</field>
	</record>
	<menuitem name="Direct Marketing/Configuration/Campaigns/All Trademarks" id="menu_action_campaign_trademark_form" action="action_campaign_trademark_form"/>
-->

	<record model="ir.actions.act_window" id="action_campaign_dealer_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">res.partner</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="base.view_partner_tree"/>
		<field name="domain">[('category_id','like','Dealer')]</field>
		<field name="context">{'category':'Dealer'}</field>
	</record>
	<menuitem name="Direct Marketing/Configuration/Campaigns/All Dealers" id="menu_action_campaign_dealer_form" action="action_campaign_dealer_form"/>

	<record model="ir.actions.act_window" id="action_campaign_broker_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">res.partner</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="base.view_partner_tree"/>
		<field name="domain">[('category_id','like','Broker')]</field>
		<field name="context">{'category':'Broker'}</field>
	</record>
	<menuitem name="Direct Marketing/Configuration/Campaigns/Customer Files/All Brokers" id="menu_action_campaign_broker_form" action="action_campaign_broker_form"/>

	<record model="ir.actions.act_window" id="action_campaign_duplicator_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">res.partner</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="base.view_partner_tree"/>
		<field name="domain">[('category_id','like','Deduplicator')]</field>
		<field name="context">{'category':'Deduplicator'}</field>
	</record>
	<menuitem name="Direct Marketing/Configuration/Campaigns/Customer Files/All Deduplicators" id="menu_action_campaign_duplicator_form" action="action_campaign_duplicator_form"/>

        <record id="view_country_form_inherit" model="ir.ui.view">
            <field name="name">res.country.form.inherit</field>
            <field name="model">res.country</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="base.view_country_form"/>
            <field name="arch" type="xml">
				<field name="code" position="after">
                   <field name="main_language" select="1"/>
                   <field name="main_currency" select="1"/>
				</field>
            </field>
        </record>

	<record model="ir.ui.view" id="view_campaign_purchase_line_tree">
		<field name="name">dm.campaign.purchase_line_tree</field>
		<field name="model">dm.campaign_purchase_line</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Campaigns">
				<tree string="Purchase Lines">
					<field name="product_id"/>
					<field name="quantity"/>
					<field name="uom_id"/>
					<field name="constraint"/>
					<field name="date_planned"/>
					<field name="trigger"/>
					<field name="state"/>
					<button name="po_generate" string="Generate Purchase Orders" states="pending" type="object"/>
				</tree>
			</tree>
		</field>
	</record>


	<record model="ir.ui.view" id="view_campaign_purchase_line_form">
		<field name="name">dm.campaign.purchase_line_form</field>
		<field name="model">dm.campaign_purchase_line</field>
		<field name="type">form</field>
		<field name="arch" type="xml">
			<form string="Purchase line">
				<field name="product_id"/>
				<newline/>
				<field name="quantity"/>
				<field name="uom_id"/>
				<field name="constraint"/>
				<field name="date_planned"/>
				<field name="trigger"/>
				<field name="notes" colspan="4" nolabel="1"/>
				<group colspan="4">
					<field name="state"/>
				</group>
			</form>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_campaign_purchase_line_form">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign.purchase_line</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree,form</field>
		<field name="view_id" ref="view_campaign_purchase_line_form"/>
	</record>

	<record model="ir.actions.act_window" id="action_campaign_purchase_line_tree">
		<field name="type">ir.actions.act_window</field>
		<field name="res_model">dm.campaign.purchase_line</field>
		<field name="view_type">tree</field>
		<field name="view_mode">form,tree</field>
		<field name="view_id" ref="view_campaign_purchase_line_tree"/>
	</record>

</data>
</openerp>
