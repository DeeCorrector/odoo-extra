<?xml version="1.0"?>
<terp>
	<data>

		<!-- EVENTS  -->

		<!-- EVENTS/CONFIGURATION/TYPE OF EVENTS -->
		<record model="ir.ui.view" id="view_event_type_form">
		  <field name="name">Event type</field>
		  <field name="model">event.type</field>
		  <field name="type">form</field>
		  <field name="arch" type="xml">
			<form string="Event Type">
				<field name="name" select="1"/>
			</form>
		  </field>
		</record>
		<record model="ir.ui.view" id="view_event_type_tree">
		  <field name="name">Event type</field>
		  <field name="model">event.type</field>
		  <field name="type">tree</field>
		  <field name="arch" type="xml">
			<tree string="Event Type">
			  <field name="name"/>
			</tree>
		  </field>
		</record>
		<record model="ir.actions.act_window" id="action_event_type">
		  <field name="res_model">event.type</field>
		  <field name="view_type">form</field>
		</record>
		<menuitem name="Events/Configuration/Types of events" id="menu_event_type" action="action_event_type" />

		<!-- The base section for all events -->

		<record model="crm.case.section" id="case_section_event">
			<field name="name">Events</field>
		</record>
		<record model="ir.actions.act_window" id="action_event_categories">
			<field name="name">Events by section</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">crm.case.section</field>
			<field name="domain">[('parent_id','=',ref('case_section_event'))]</field>
			<field name="view_type">tree</field>
		</record>
		<menuitem name="Events/Events by categories" id="menu_action_event_categories" action="action_event_categories" />


		<!-- EVENTS/CONFIGURATION/EVENTS  -->

		<record model="ir.ui.view" id="view_event_form">
			<field name="name">Events</field>
			<field name="model">event.event</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Events">
					<notebook>
					<page string="Information">
						<separator string="Event description" colspan="4"/>
						<field name="name" string="Event" select="1" colspan="4"/>
						<field name="parent_id" domain="[('parent_id','child_of','Event')]" string="Category"/>
						<field name="type"/>
						<field name="user_id" select="1"/>
						<field name="active"/>
						<field name="date_begin" select="1"/>
						<field name="date_end" select="2"/>
						<field name="register_min" select="2"/>
						<field name="register_max" select="2"/>
						<separator string="Tasks management" colspan="4"/>
						<field name="project_id"/>
						<button colspan="2" string="Create Retro-Planning" name="button_project_create"/>
						<separator string="Status" colspan="4"/>
						<field name="state" select="1"/>
						<group col="4" colspan="2">
							<button string="Confirm Event" name="button_confirm" states="draft"/>
							<button string="Cancel Event" name="button_cancel" states="draft,confirm"/>
							<button string="Event Done" name="button_done" states="confirm"/>
							<button string="Set To Draft" name="button_draft" states="confirm,cancel,done"/>
						</group>
					</page><page string="Statistics">
						<separator string="Registrations" colspan="4"/>
						<field name="register_current"/>
						<field name="register_prospect"/>
						<separator string="Remaining Tasks" colspan="4"/>

					</page>
					</notebook>

			</form>
			</field>
		</record>


		<!-- EVENTS/CONFIGURATION/EVENTS  -->
		<record model="ir.actions.act_window" id="action_new_event_form">
			<field name="name">New event</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">event.event</field>
			<field name="view_type">form</field>
			<field name="view_mode">form,tree</field>
		</record>
		<menuitem name="Events/Configuration/New Event" id="menu_event_new_event" action="action_new_event_form" />

		<record model="ir.actions.act_window" id="action_event_view">
			<field name="name">Events</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">event.event</field>
			<field name="view_type">form</field>
			<field name="view_mode">tree,form</field>
		</record>
		<menuitem name="Events/All Events" id="menu_event_event" action="action_event_view" />

		<record model="ir.actions.act_window" id="action_event_view_draft">
			<field name="name">Draft Events</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">event.event</field>
			<field name="domain">[('state','=','draft')]</field>
		</record>
		<menuitem
			name="Events/All Events/Draft Events"
			id="menu_event_event_draft"
			action="action_event_view_draft" />
		<record model="ir.actions.act_window" id="action_event_view_confirm">
			<field name="name">Confirmed Events</field>
			<field name="type">ir.actions.act_window</field>
			<field name="res_model">event.event</field>
			<field name="domain">[('state','=','confirm')]</field>
		</record>
		<menuitem name="Events/All Events/Confirmed Events"
			id="menu_event_event_confirm"
			action="action_event_view_confirm" />




		<wizard string="New child event"
				model="event.event"
				name="wizard_event_new"
				keyword="client_action_multi"
				menu="False"
				id="wizard_event_new"
				/>


		<record model="ir.values" id="ir_open_new_event">
			<field name="key2">tree_but_open</field>
			<field name="model">event.event</field>
			<field name="name">New child event</field>
			<field name="value" eval="'ir.actions.wizard,%d'%wizard_event_new"/>
			<field name="object" eval="True"/>
		</record>



		<!-- EVENTS/REGISTRATIONS/EVENTS  -->

		<record model="ir.ui.view" id="view_registration_form">
			<field name="name">Registrations</field>
			<field name="model">crm.case</field>
			<field name="type">form</field>
			<field name="arch" type="xml">
				<form string="Registrations">
					<field name="nb_register"/>
					<field name="section_id"/>
					<field name="partner_id"/>
					<field name="state"/>
				</form>
			</field>
		</record>

		<record model="ir.ui.view" id="view_registration_tree">
			<field name="name">Registrations</field>
			<field name="model">event.registration</field>
			<field name="type">tree</field>
			<field name="arch" type="xml">
				<tree string="Registrations">
					<field name="nb_register"/>
					<field name="section_id"/>
					<field name="partner_id"/>
					<field name="state"/>
				</tree>
			</field>
		</record>
		<record model="ir.actions.act_window" id="action_registration">
		  <field name="name">Registrations</field>
		  <field name="res_model">crm.case</field>
		  <field name="view_type">form</field>
		  <field name="domain">[('section_id.code','=','Event')]</field>
		  <field name="view_mode">tree,form</field>
		</record>
		<menuitem
			name="Events/All Registrations"
			id="menu_action_registration"
			action="action_registration"/>
		<record model="ir.actions.act_window" id="action_registration_draft">
		  <field name="name">Unconfirmed Registrations</field>
		  <field name="res_model">crm.case</field>
		  <field name="view_type">form</field>
		  <field name="domain">[('section_id.code','=','Event'),('state','=','draft')]</field>
		  <field name="view_mode">tree,form</field>
		</record>
		<menuitem
			name="Events/All Registrations/Unconfirmed Registrations"
			id="menu_action_registration_draft"
			action="action_registration_draft"/>
		<record model="ir.actions.act_window" id="action_registration_confirm">
		  <field name="name">Confirmed Registrations</field>
		  <field name="res_model">crm.case</field>
		  <field name="view_type">form</field>
		  <field name="domain">[('section_id.code','=','Event'),('state','in',('open','done'))]</field>
		</record>
		<menuitem
			name="Events/All Registrations/Confirmed Registrations"
			id="menu_action_registration_confirm"
			action="action_registration_confirm"/>



		<wizard
			string="Tasks"
			model="event.event"
			name="wizard_event_task"
			id="wizard_event_task"
			/>
		<wizard
			string="Registrations"
			model="event.event"
			name="wizard_event_registration"
			id="wizard_event_registration"
			/>


<!-- report , event on registration... start -->
	<record model="ir.ui.view" id="report_event_registration_tree">
		<field name="name">report.event.registration.tree</field>
		<field name="model">report.event.registration</field>
		<field name="type">tree</field>
		<field name="arch" type="xml">
			<tree string="Event on Registration">
				<field name="name" select="1"/>
				<field name="date_begin" select="1"/>
				<field name="date_end"/>
				<field name="draft_state" select="2"/>
				<field name="confirm_state" select="2"/>
				<field name="register_max" select="2"/>
			</tree>
		</field>
	</record>

	<record model="ir.actions.act_window" id="action_event_registration">
		<field name="name">Events On Registrations</field>
		<field name="res_model">report.event.registration</field>
		<field name="view_type">form</field>
		<field name="view_mode">tree</field>
	</record>
	<menuitem name="Events/Reporting/Events on Registrations" action="action_event_registration" id="menu_report_event_registration"/>


<!-- end... -->

	</data>
</terp>
